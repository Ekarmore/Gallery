---
import GalleryLayout from '@layouts/galleryLayout.astro'
import Image from '@components/Image.astro'

const href = import.meta.env.PROD
  ? 'https://ekargallery.netlify.app/'
  : Astro.request.url
const url = `${href}all.json`
const res = await fetch(url)
const workList = await res.json()
---

<GalleryLayout title={'Gallery'}>
  <main class="prose slide-in">
    <p class="font-serif font-normal animate-fill-both">Gallery</p>
    <section
      id="workCatalog"
      class="font-sans grid md:grid-cols-2 gap-2 place-items-center"
    >
      {
        workList.map((work) => {
          return (
            <div id="" class="relative">
              <a
                href={`/${work.workName.replace(/ /g, '_')}`}
                id="workName"
                class=" text-white w-full h-full absolute flex flex-col items-center justify-center text-sm font-serif z-30 opacity-100 md:opacity-0 decoration-none md:backdrop-blur-sm"
              >
                {work.workName}
              </a>
              <div class="relative opacity-90 md:opacity-100">
            <Image coverUrl={work.coverImage[0].url} placeholderUrl={work.placeHolderImage[0].url} />
              </div>
            </div>
          )
        })
      }
    </section>
    <p>
      <a href="https://ekar.site" class="decoration-none  animate-fill-both font-serif font-normal">:: ekar</a>
      <a href="mailto:Earthb0y@outlook.com" class="decoration-none  animate-fill-both font-serif font-normal">- email</a>
      </p>
  </main>
</GalleryLayout>

<style>
  #workCatalog:hover #workName {
    @apply md:hover:opacity-100 md:opacity-0 transition-all ease-in-out transition-all decoration-none;
  }
</style>
